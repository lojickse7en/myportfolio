(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[509],{"1aMd":function(e,t,a){"use strict";a.d(t,"a",(function(){return RegistrationForm}));var r=a("wx14"),n=a("rePB"),o=a("ODXe"),i=a("Ff2n"),c=a("DzJC"),s=a.n(c),l=a("E+oP"),p=a.n(l),m=a("G8Hi"),d=a("FZcb"),u=a("kVzq"),b=a("TSYQ"),g=a.n(b),_=a("q1tI"),f=a.n(_),v=a("24Ii"),h=a.n(v),y=a("xk4V"),O=a.n(y),j=a("f8p9"),E=a("DAui"),S=a("tYyt"),w=a("z9go"),N=a("GL5z"),C=a("hFGM"),k=a("gtj7"),P=a("b0K7"),R=a("NWss"),D=a("Z0cm"),x=a.n(D),B=a("ev9x"),I=a("vOOB");function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const extractValidationErrors=e=>{var t;const a=null===(t=e.body)||void 0===t?void 0:t.errors;return a&&Object.values(a).filter((e=>e))?Object.entries(a).reduce(((e,[t,a])=>_objectSpread(_objectSpread({},e),{},{[t]:x()(a)?I[a[0]]:I[a]||a})),{}):null},redirectAfterLogin=({redirectTo:e,workerSupportApplicant:t,experiments:a})=>{Object(B.g)(e)?window.location.assign(Object(k.d)(e||Object(P.fb)())):window.location.assign(Object(k.d)((({redirectUrl:e,workerSupportApplicant:t,experiments:a})=>t?P.Yb:"variant"===a.exp_remove_upsell_after_signup?"/welcome/find-a-course":Object(P.xb)({redirectUrl:e,fromSignUpPage:!0}))({redirectUrl:e,workerSupportApplicant:t,experiments:a})))};var F={registrationContainer:"registrationContainer__1DWVArjxkRSHEqpISv3YfU",registrationContainerCompact:"registrationContainerCompact__3f5fD0mXckkhzC_gkXDQaJ",screenReaderOnly:"screenReaderOnly__2S7ruRxpd1VhnuyeMz0di2",submitButton:"submitButton__1syIjVGtZiGfg2aBWCcvkZ",visuallyDisabled:"visuallyDisabled__2u_A2g3lZCdCvnedehaKKN",submitButtonCompact:"submitButtonCompact__DTD3_nPUjcDW2juBilPyk",tos:"tos__2S7BNNliayxJrYfZEqHGOH",fieldset:"fieldset__2IcsxborktqVvm5FdfygAO",formCompact:"formCompact__Q6nQtda86q7aKdsfLQSvz",formGroupsCompact:"formGroupsCompact__1e0cWED9TSZNrITxnH3MoV",formGroupCompact:"formGroupCompact__225iYntNRtxkKn05IYqtJ1",inputCompact:"inputCompact__2Shf6uPLKjgQGwlRGM6u4D",validCheckmark:"validCheckmark__FINN8PBxaKyExgp8BuWaN",inputWrapper:"inputWrapper__1WcSn7pm4PiUUt2d3hgszk",hidden:"hidden__IE7yAQczIi7NG5Xaf2XMv",recaptchaError:"recaptchaError__2PRVQPBckCquoqnpNkolaI",formGroup:"formGroup__26lWN6IoN44keRivjjZbD7",padBottomIfNotEmpty:"padBottomIfNotEmpty__SRLk-qQ59lLzCQRc26yql","grecaptcha-badge":"grecaptcha-badge"},G=a("yrBZ");const SweetContainerInput=()=>f.a.createElement(G.a,{height:"0",left:"100vw",overflow:"hidden",position:"absolute",top:"100vh",width:"0"},f.a.createElement("label",{htmlFor:"sweet_container"},"Check this input if you are an automated machine, and not a human"),f.a.createElement("input",{id:"sweet_container",name:"sweet_container",type:"checkbox"}));var A=a("oHca"),V=a("5sab"),U=a("05V4"),L=a("ANOs"),q="validationText__2V8IomQ7py3ImJSkR74lUL",K="tooltipValidationError__1uEAgOW6IuqUqWblAq8-ak",T="tooltipTarget__2QEgWo1UnUfrI64N8g5a7R",W="infoIcon__1g_zfaxGIRIbEh291YxmGv",z="tooltipContents__2bqd9NtbRxq1kYIR2tCLhZ";const Q={password:L.a},ValidationError=e=>{if(!e.validationError)return null;const t=Q[e.fieldName];return t?f.a.createElement("div",{className:K},f.a.createElement(A.a,{alignment:"top-right",focusable:!0,id:e.fieldName+"-tooltip",target:f.a.createElement("div",{className:T},f.a.createElement("span",{"aria-live":"assertive",className:q},e.validationError),f.a.createElement(U.a,{size:12,className:W}))},f.a.createElement(V.a,{text:t,spacing:"tight",className:z}))):f.a.createElement("span",{"aria-live":"assertive",className:q},e.validationError)};function RegistrationForm_ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function RegistrationForm_objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?RegistrationForm_ownKeys(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):RegistrationForm_ownKeys(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const M=[{name:"email",label:R.emailLabel,type:"email",invalidMessage:"Please use a valid email address",pattern:void 0},{name:"password",label:R.passwordLabel,type:"password",invalidMessage:"is not long enough",pattern:".{6,128}"}],Z="/register/validate",RegistrationForm=e=>{let t=e.onSuccess,a=void 0===t?redirectAfterLogin:t,n=e.submitButtonProps,c=void 0===n?{size:"large",theme:"brand-purple"}:n,l=e.isStudent,b=void 0!==l&&l,v=Object(i.a)(e,["onSuccess","submitButtonProps","isStudent"]);const y="sign_up_form_",D=Object(_.useState)(!1),x=Object(o.a)(D,2),B=x[0],I=x[1],G=Object(_.useState)(),A=Object(o.a)(G,2),V=A[0],U=A[1],L=Object(_.useState)(O()()),q=Object(o.a)(L,2),K=q[0],T=q[1],W=Object(_.useState)({}),z=Object(o.a)(W,2),Q=z[0],Y=z[1],H=Object(_.useRef)(null),J=Object(_.useRef)(null),X=Object.values(Q).every((e=>e.isValidated)),getElementValue=e=>"checkbox"===e.type?e.checked:e.value,onSuccessfulValidation=e=>{Y(RegistrationForm_objectSpread(RegistrationForm_objectSpread({},Q),{},{[e]:{isValidated:!0}}))},onFailedValidation=(e,t)=>{Y(RegistrationForm_objectSpread(RegistrationForm_objectSpread({},Q),{},{[e]:{isValidated:!1,error:t}}))},onSubmissionFailedValidation=e=>{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&onFailedValidation(t,e[t])},serialize=()=>{if(H.current)return[...H.current.elements].filter((e=>e.name)).reduce(((e,t)=>{const a=t.dataset.resource;return RegistrationForm_objectSpread(RegistrationForm_objectSpread({},e),{},a?{[a]:RegistrationForm_objectSpread(RegistrationForm_objectSpread({},e[a]),{},{[t.name]:getElementValue(t)})}:{[t.name]:getElementValue(t)})}),{})},resetRecaptcha=()=>{I(!1),T(O()())},$=s()(((e,t)=>{t.target.value?h.a.post(Z).send({user:{[e]:t.target.value}}).use(C.b).accept("json").then((()=>{onSuccessfulValidation(e)})).catch((t=>{const a=extractValidationErrors(t.response);(null==a?void 0:a[e])?onFailedValidation(e,a[e]):onSuccessfulValidation(e)})):onFailedValidation(e,"can't be blank")}),250),validateField=(e,t)=>{"password"===e?((e,t)=>{const a=t.target.validity.valueMissing,r=t.target.validity.valid;let n;a?n="can't be blank":r||(n=M.find((t=>t.name===e)).invalidMessage),n?onFailedValidation(e,n):onSuccessfulValidation(e)})(e,t):$(e,t)},onFieldBlur=e=>{e.persist();const t=serialize().user||{},a=t.email,r=void 0===a?"":a,n=t.password,o=void 0===n?"":n;p()(r)&&p()(o)||validateField(e.target.name,e)},onFieldKeyUp=e=>{e.persist();const t=e.target.name;Q[t]&&validateField(t,e),V||(U("pending"),setTimeout((()=>{U("complete")}),500))},ee=S.a.get("authenticity_token"),te=v.currentPage,ae=v.defaultValues,re=void 0===ae?{email:"",password:""}:ae,ne=v.disableFieldset,oe=v.hideOauth,ie=v.hideRecaptchaInfo,ce=v.hideSubmitButton,se=v.locationType,le=v.redirectUrl,pe=v.compact,me=v.classNames,de=void 0===me?{}:me,ue="location/EXERCISE"===se,be=le&&Object(k.d)(le),ge=g()("recaptcha-wrapper",{[F.padBottomIfNotEmpty]:pe});return f.a.createElement("div",{className:g()(F.registrationContainer,de.container,{[F.registrationContainerCompact]:pe})},f.a.createElement("form",{onSubmit:e=>(e.preventDefault(),X?h.a.post(Z).send(serialize()).use(C.b).accept("json").then((()=>{null!==J.current?J.current.execute():N.a.error({message:"captcha on checkoutpage has a null ref"})})).catch((e=>{const t=extractValidationErrors(e.response);t&&onSubmissionFailedValidation(t),I(!1)})):null),noValidate:!0,ref:H,method:"POST"},f.a.createElement("fieldset",{className:F.fieldset,disabled:ne},f.a.createElement(SweetContainerInput,null),f.a.createElement("input",{name:"authenticity_token",type:"hidden",value:ee}),f.a.createElement("input",{name:"coding_reminders_comms_timezone","data-resource":"user",type:"hidden",value:Intl.DateTimeFormat().resolvedOptions().timeZone}),f.a.createElement("input",{name:"signing_up_from_exercise",type:"hidden",value:""+ue}),b&&f.a.createElement("input",{name:"student_access",type:"hidden",value:1}),f.a.createElement("input",{name:"referring_page",type:"hidden",value:te}),f.a.createElement("input",{name:"redirect",type:"hidden",value:be}),f.a.createElement("div",{className:g()(F.formGroups,{[F.formGroupsCompact]:pe},de.formGroups)},M.map((e=>{var t,a,r;return f.a.createElement(m.d,{key:`${y}${e.name}`,htmlFor:`${y}${e.name}`,label:e.label,className:g()(F.formGroup,{[F.formGroupCompact]:pe})},f.a.createElement(ValidationError,{fieldName:e.name,validationError:null===(t=Q[e.name])||void 0===t?void 0:t.error}),f.a.createElement("div",{className:F.inputWrapper},f.a.createElement(m.g,{"aria-invalid":(null===(a=Q[e.name])||void 0===a?void 0:a.isValidated)?"false":"true",className:g()(F.input,{[F.inputCompact]:pe},de.input),"data-testid":e.name+"-field",htmlFor:`${y}${e.name}`,name:e.name,type:e.type,onBlur:onFieldBlur,onKeyUp:onFieldKeyUp,required:!0,error:Q[e.name]?!Q[e.name].isValidated:void 0,pattern:e.pattern,"data-resource":"user",defaultValue:re[e.name]}),(null===(r=Q[e.name])||void 0===r?void 0:r.isValidated)&&f.a.createElement(u.a,{className:F.validCheckmark})))}))),f.a.createElement("div",{className:ge},(null==Q?void 0:Q.recaptcha)&&f.a.createElement("div",{className:F.recaptchaError,"data-testid":"recaptcha-error"},Q.recaptcha),f.a.createElement(E.a,{key:K,publicKey:S.a.get("recaptcha_key_v2"),size:"invisible",ref:J,onChange:e=>{I(!0),h.a.post(P.Fb).send(RegistrationForm_objectSpread(RegistrationForm_objectSpread({},serialize()),{},{"g-recaptcha-response":e})).use(C.b).accept("json").then((({body:e})=>{Object(w.a)("user_sign_up"),I(!1),a(e)})).catch((e=>{const t=extractValidationErrors(e.response);I(!1),t&&onSubmissionFailedValidation(t),resetRecaptcha()}))},onExpired:()=>{resetRecaptcha()}})),f.a.createElement("div",{className:de.footer},f.a.createElement(d.a,Object(r.a)({},c,{onClick:()=>{Object(w.c)({target:"create_account"})},type:"submit",className:g()(F.submitButton,{[F.submitButtonCompact]:pe,[F.hidden]:ce},de.submitButton),disabled:B||"complete"!==V,id:y+"submit","data-testid":"registration-form-submit"}),"Sign Up"),!ie&&f.a.createElement("p",{className:g()(F.tos,de.tos),dangerouslySetInnerHTML:{__html:R.recaptchaTOS}})))),!oe&&f.a.createElement(j.a,{signUp:!0,urlParams:{redirect:be}}))}},NWss:function(e){e.exports=JSON.parse('{"createAccountComplete":"Account created. You\'re almost there!","emailLabel":"Email","passwordLabel":"Password","recaptchaTOS":"By signing up for Codecademy, you agree to Codecademy\'s <a href=\\"/terms\\">Terms of Service</a> & <a href=\\"/policy\\">Privacy Policy</a>.","createAccountCTA":"Sign Up"}')},vOOB:function(e){e.exports=JSON.parse('{"weak":"too weak","breach":"We\'ve detected that the password you\'ve entered may not be secure. Please create a new one.","length":"is not long enough"}')}}]);
//# sourceMappingURL=509.1386966dc54ea6fab815.chunk.js.map